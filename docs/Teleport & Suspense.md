
1. **主应用 (App.vue)**
    
    - **职责**：作为项目入口，统一管理全局弹窗状态和异步组件加载展示。
    - **关键点**：
        - [PATTERN] 采用 Teleport 跨层级渲染全局弹窗。
        - [PATTERN] 使用 Suspense 搭配骨架屏确保异步加载无布局偏移（CLS=0）。
2. **全局弹窗管理器 (ModalManager)**
    
    - **职责**：集中管理全局弹窗数据和展示逻辑，通过 Teleport 渲染到指定 DOM 节点（#modal-container）。
    - **错误写法示例**：直接在组件内部嵌套弹窗逻辑，导致组件间通信困难及全局管理失效。
    - **NOTE**：确保目标节点存在，否则弹窗无法正常渲染。
3. **异步加载与骨架屏 (Suspense + Skeleton)**
    
    - **职责**：采用 Suspense 和骨架屏组件，在加载异步组件时无缝展示骨架屏，防止首屏布局跳动。
    - **错误写法示例**：使用 v-if 与异步组件直接切换，骨架屏显示时机不准确，导致视觉抖动。
    - **WARNING**：需合理处理异步加载失败情况，防止用户体验断裂。
4. **组合式函数封装 (useFetch)**
    
    - **职责**：封装数据请求逻辑，包括 loading、error 状态管理，实现多组件间的逻辑复用且无副作用。
    - **错误写法示例**：多个组件内重复定义请求逻辑，出现状态污染与重复请求问题。
    - **NOTE**：确保异步操作返回状态的正确更新和资源回收。

## 关键技术选型理由

- **Vue3 高级组件开发**：
    
    - 利用 **Teleport** 实现跨组件层级的全局弹窗渲染，优化组件结构和状态管理。
    - 使用 **Suspense** 展示异步加载时的骨架屏，降低首屏加载压力，保证 CLS=0。
    - 采用组合式 API（如 useFetch）实现业务逻辑的模块化和复用，降低耦合度，提升维护性。
- **设计模式**：
    
    - [PATTERN] 高阶组件模式（HOC）：构建可扩展的全局弹窗管理器，为后续功能拓展提供良好基础。
    - [PATTERN] 组合式函数封装：将数据请求逻辑抽离成可复用模块，提升代码清晰度与健壮性。
- **性能优化**：
    
    - [PERF] 异步加载与骨架屏方案减少首次渲染负荷，提升用户体验。
    - [PERF] 全局弹窗与 Teleport 的结合降低了不必要的 DOM 重绘，提高页面响应速度。

---

# 学习要点总结

1. **核心概念** [CONCEPT]：
    
    - Teleport、Suspense、异步组件、组合式 API
    - 参考链接：[Vue 官方文档](https://v3.vuejs.org/)
2. **错误写法示例**：
    
    - 弹窗直接内嵌导致全局状态失效。
    - v-if 控制异步组件加载导致骨架屏显示不稳定。
    - 组件内部重复定义数据请求逻辑而不复用 useFetch。
3. **设计模式应用** [PATTERN]：
    
    - 高阶组件模式 (HOC) 用于构造灵活的全局弹窗管理。
    - 组合式函数封装数据请求逻辑，减少重复代码，实现逻辑模块化。
4. **性能优化点** [PERF]：
    
    - 采用骨架屏和异步加载分离首屏渲染，确保用户体验流畅。
    - 利用 Teleport 优化全局状态组件的渲染，减少 DOM 重排压力。

